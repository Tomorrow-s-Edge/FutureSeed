name: Notify Discord

on:
  push: # Trigger on all branches @testing
    branches:
      - '**'

jobs:
  discord:
    runs-on: ubuntu-latest
    steps:
      - name: Check webhook secret length
        run: echo "Webhook length is ${{ secrets.DISCORD_WEBHOOK }}".length


      - name: Send push notification to Discord
        uses: Ilshidur/action-discord@master
        with:
          webhook_url: ${{ secrets.DISCORD_WEBHOOK }}
          message:  |
            ðŸ“¦ **New push to `${{ github.ref_name }}`**
            ðŸ‘¤ By: `${{ github.actor }}`
            ðŸ’¬ Message: _${{ github.event.head_commit.message }}_ "Test notification from GitHub Actions"
            ðŸ”— [View Commit](${{ github.event.head_commit.url }})
